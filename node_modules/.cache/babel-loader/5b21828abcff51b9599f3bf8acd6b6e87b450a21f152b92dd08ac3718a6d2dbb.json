{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fiorella\\\\Documents\\\\GitHub\\\\BuscaTuProfe_Front\\\\src\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\n// Importación de rutas\nimport routes from '../helpers/routes';\nimport useAuth from '../auth/useAuth';\n\n// Importación de componentes\nimport Button from '../components/Button';\nimport InputText from '../components/InputText';\nimport Option from '../components/Option';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const {\n    login\n  } = useAuth();\n  const location = useLocation();\n  const [values, setValues] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  useEffect(() => {\n    if (Object.keys(errors).length === 0 && submitted) {\n      logIn();\n      setSubmitted(false);\n    }\n  }, [errors]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({\n      ...values,\n      [name]: value\n    });\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    setErrors(validate(values));\n    setSubmitted(true);\n  };\n  const validate = values => {\n    let errors = {};\n\n    // Validación del correo\n    if (!values.email.trim()) errors.email = 'Este campo es necesario';else if (!/^[\\w._%+-]+@[\\w.-]+\\.[a-zA-Z]{2,4}$/.test(values.email)) errors.email = 'Debe ingresar un correo válido';\n    // Validación de la contraseña\n    if (!values.password) errors.password = 'Este campo es necesario';\n    return errors;\n  };\n  const logIn = () => {\n    axios.post(`${process.env.REACT_APP_SERVER}/api/auth/signin`, values).then(res => {\n      var _location$state;\n      const data = res.data;\n      const user = data.user;\n      const token = data.token;\n      localStorage.setItem('tl-user', JSON.stringify(user));\n      localStorage.setItem('tl-token', token);\n      login({\n        user,\n        token\n      }, (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from);\n    }).catch(err => console.error(err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"text-gray-600 body-font\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container px-5 py-24 mx-auto flex flex-wrap items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col mx-auto shadow md:ml-auto w-full mt-10 md:mt-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-gray-900 text-2xl font-medium title-font text-center mb-6\",\n          children: \"BIENVENIDO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputText, {\n          id: \"email\",\n          type: \"email\",\n          style_extra: \"mb-4\",\n          label: \"Correo electr\\xF3nico\",\n          value: values.email,\n          onChange: handleChange,\n          errorMsg: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputText, {\n          id: \"password\",\n          type: \"password\",\n          style_extra: \"mb-1\",\n          label: \"Contrase\\xF1a\",\n          value: values.password,\n          onChange: handleChange,\n          errorMsg: errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          link: routes.register,\n          style_link: \"text-xs text-right text-gray-400 hover:text-gray-900\",\n          option: \"\\xBFOlvidaste tu contrase\\xF1a?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style_extra: \"mt-7 mb-10 text-gray-400 hover:text-gray-900\",\n          type: \"submit\",\n          style_button: \"w-full px-8 py-2 text-white text-lg bg-color-2\",\n          option: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 text-center border-t border-gray-300 pt-6\",\n          children: [\"\\xBFNo tienes una cuenta?\", /*#__PURE__*/_jsxDEV(Option, {\n            link: routes.register,\n            style_link: \"ml-1 text-cyan-600 hover:text-cyan-800 font-semibold\",\n            option: \"Reg\\xEDstrate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n_s(LoginPage, \"QcwIC4zipQUqubBT3WzxjnkljwI=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["axios","useState","useEffect","useLocation","routes","useAuth","Button","InputText","Option","LoginPage","login","location","values","setValues","email","password","errors","setErrors","submitted","setSubmitted","Object","keys","length","logIn","handleChange","e","name","value","target","handleSubmit","preventDefault","validate","trim","test","post","process","env","REACT_APP_SERVER","then","res","data","user","token","localStorage","setItem","JSON","stringify","state","from","catch","err","console","error","register"],"sources":["C:/Users/Fiorella/Documents/GitHub/BuscaTuProfe_Front/src/pages/LoginPage.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n// Importación de rutas\r\nimport routes from '../helpers/routes';\r\nimport useAuth from '../auth/useAuth';\r\n\r\n// Importación de componentes\r\nimport Button from '../components/Button';\r\nimport InputText from '../components/InputText';\r\nimport Option from '../components/Option';\r\n\r\nconst LoginPage = () => {\r\n    const { login } = useAuth();\r\n    const location = useLocation();\r\n    const [values, setValues] = useState({\r\n        email: '',\r\n        password: ''\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(errors).length === 0 && submitted) {\r\n            logIn();\r\n            setSubmitted(false);\r\n        }\r\n    }, [errors]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setValues({\r\n            ...values,\r\n            [name]: value \r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setErrors(validate(values));\r\n        setSubmitted(true);\r\n    };\r\n\r\n    const validate = (values) => {\r\n        let errors = {};\r\n\r\n        // Validación del correo\r\n        if(!values.email.trim())\r\n            errors.email = 'Este campo es necesario';\r\n        else if(!/^[\\w._%+-]+@[\\w.-]+\\.[a-zA-Z]{2,4}$/.test(values.email))\r\n            errors.email = 'Debe ingresar un correo válido';\r\n        // Validación de la contraseña\r\n        if(!values.password)\r\n            errors.password = 'Este campo es necesario';\r\n\r\n        return errors;\r\n    };\r\n\r\n    const logIn = () => {\r\n        axios.post(`${ process.env.REACT_APP_SERVER }/api/auth/signin`, values)\r\n            .then(res => {\r\n                const data = res.data;\r\n                const user = data.user;\r\n                const token = data.token;\r\n                localStorage.setItem('tl-user', JSON.stringify(user));\r\n                localStorage.setItem('tl-token', token);\r\n                login({ user, token }, location.state?.from);\r\n            }).catch(err => console.error(err));\r\n    };\r\n\r\n    return (\r\n        <section className=\"text-gray-600 body-font\">\r\n            <div className=\"container px-5 py-24 mx-auto flex flex-wrap items-center\">\r\n                <form onSubmit={ handleSubmit } className=\"lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col mx-auto shadow md:ml-auto w-full mt-10 md:mt-0\">\r\n                    <h2 className=\"text-gray-900 text-2xl font-medium title-font text-center mb-6\">\r\n                        BIENVENIDO\r\n                    </h2>\r\n                    <InputText id=\"email\" type=\"email\" style_extra=\"mb-4\" label=\"Correo electrónico\" value={ values.email } onChange={ handleChange } errorMsg={ errors.email } />\r\n                    <InputText id=\"password\" type=\"password\" style_extra=\"mb-1\" label=\"Contraseña\" value={ values.password } onChange={ handleChange } errorMsg={ errors.password } />\r\n                    <Option link={ routes.register } style_link=\"text-xs text-right text-gray-400 hover:text-gray-900\" option=\"¿Olvidaste tu contraseña?\" />\r\n                    <Button style_extra=\"mt-7 mb-10 text-gray-400 hover:text-gray-900\" type=\"submit\" style_button=\"w-full px-8 py-2 text-white text-lg bg-color-2\" option=\"Ingresar\" />\r\n                    <p className=\"text-sm text-gray-500 text-center border-t border-gray-300 pt-6\">\r\n                        ¿No tienes una cuenta?\r\n                        <Option link={ routes.register } style_link=\"ml-1 text-cyan-600 hover:text-cyan-800 font-semibold\" option=\"Regístrate\" />\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n        \r\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}